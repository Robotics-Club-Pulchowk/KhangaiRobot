ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"wheel.cpp"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text._ZL11time_periodt,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	_ZL11time_periodt:
  25              	.LFB405:
  26              		.file 1 "Core/Src/devs/wheel.cpp"
   1:Core/Src/devs/wheel.cpp **** /*
   2:Core/Src/devs/wheel.cpp ****  * wheel.c
   3:Core/Src/devs/wheel.cpp ****  *
   4:Core/Src/devs/wheel.cpp ****  * Created : 10/1/2018
   5:Core/Src/devs/wheel.cpp ****  */
   6:Core/Src/devs/wheel.cpp **** 
   7:Core/Src/devs/wheel.cpp **** #include "wheel.h"
   8:Core/Src/devs/wheel.cpp **** #include <math.h>
   9:Core/Src/devs/wheel.cpp **** 
  10:Core/Src/devs/wheel.cpp **** static uint16_t time_period(uint16_t PWM_frequency)
  11:Core/Src/devs/wheel.cpp **** {
  27              		.loc 1 11 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 10B5     		push	{r4, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 4, -8
  36              		.cfi_offset 14, -4
  37 0002 0446     		mov	r4, r0
  12:Core/Src/devs/wheel.cpp ****         if (PWM_frequency < 2000) { //MIN PWM_FREQUENCY = 1281.738 for time period to be 16 bit
  38              		.loc 1 12 0
  39 0004 B0F5FA6F 		cmp	r0, #2000
  40 0008 06D3     		bcc	.L4
  41              	.LVL1:
  42              	.L2:
  13:Core/Src/devs/wheel.cpp ****                 _Error_Handler(__FILE__, __LINE__);
  14:Core/Src/devs/wheel.cpp ****         }
  15:Core/Src/devs/wheel.cpp ****         return ((PWM_TIMER_FREQUENCY / 2) / PWM_frequency) - 1; // In Center aligned mode period do
  43              		.loc 1 15 0
ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 2


  44 000a 0648     		ldr	r0, .L5
  45 000c 90FBF4F0 		sdiv	r0, r0, r4
  46 0010 80B2     		uxth	r0, r0
  47 0012 0138     		subs	r0, r0, #1
  16:Core/Src/devs/wheel.cpp **** }
  48              		.loc 1 16 0
  49 0014 80B2     		uxth	r0, r0
  50 0016 10BD     		pop	{r4, pc}
  51              	.LVL2:
  52              	.L4:
  13:Core/Src/devs/wheel.cpp ****                 _Error_Handler(__FILE__, __LINE__);
  53              		.loc 1 13 0
  54 0018 0D21     		movs	r1, #13
  55 001a 0348     		ldr	r0, .L5+4
  56              	.LVL3:
  57 001c FFF7FEFF 		bl	_Error_Handler
  58              	.LVL4:
  59 0020 F3E7     		b	.L2
  60              	.L6:
  61 0022 00BF     		.align	2
  62              	.L5:
  63 0024 00BD0105 		.word	84000000
  64 0028 00000000 		.word	.LC0
  65              		.cfi_endproc
  66              	.LFE405:
  68              		.section	.text._ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt,"ax",%progbits
  69              		.align	1
  70              		.syntax unified
  71              		.thumb
  72              		.thumb_func
  73              		.fpu fpv4-sp-d16
  75              	_ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt:
  76              	.LFB406:
  17:Core/Src/devs/wheel.cpp **** 
  18:Core/Src/devs/wheel.cpp **** /* SET DUTYCYCLE primary function */
  19:Core/Src/devs/wheel.cpp **** static void set_DutyCycle_Primary(TIM_HandleTypeDef *htim, uint32_t Channel, uint16_t dutyCycle)
  20:Core/Src/devs/wheel.cpp **** {
  77              		.loc 1 20 0
  78              		.cfi_startproc
  79              		@ args = 0, pretend = 0, frame = 0
  80              		@ frame_needed = 0, uses_anonymous_args = 0
  81              	.LVL5:
  82 0000 70B5     		push	{r4, r5, r6, lr}
  83              	.LCFI1:
  84              		.cfi_def_cfa_offset 16
  85              		.cfi_offset 4, -16
  86              		.cfi_offset 5, -12
  87              		.cfi_offset 6, -8
  88              		.cfi_offset 14, -4
  89 0002 0646     		mov	r6, r0
  90 0004 0D46     		mov	r5, r1
  91 0006 1446     		mov	r4, r2
  21:Core/Src/devs/wheel.cpp ****         uint16_t mapped_value;
  22:Core/Src/devs/wheel.cpp ****         mapped_value = (time_period(MOTOR_DRIVER_FREQUENCY) * dutyCycle) / 65535;
  92              		.loc 1 22 0
  93 0008 4FF4FA50 		mov	r0, #8000
  94              	.LVL6:
ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 3


  95 000c FFF7FEFF 		bl	_ZL11time_periodt
  96              	.LVL7:
  97 0010 00FB04F0 		mul	r0, r0, r4
  98 0014 064B     		ldr	r3, .L9
  99 0016 83FB0023 		smull	r2, r3, r3, r0
 100 001a 0344     		add	r3, r3, r0
 101 001c C017     		asrs	r0, r0, #31
 102 001e C0EBE330 		rsb	r0, r0, r3, asr #15
 103              	.LVL8:
  23:Core/Src/devs/wheel.cpp ****         __HAL_TIM_SET_COMPARE(htim, Channel, mapped_value);
 104              		.loc 1 23 0
 105 0022 3368     		ldr	r3, [r6]
 106 0024 3433     		adds	r3, r3, #52
 107 0026 AD08     		lsrs	r5, r5, #2
 108              	.LVL9:
 109 0028 80B2     		uxth	r0, r0
 110 002a 43F82500 		str	r0, [r3, r5, lsl #2]
 111              	.LVL10:
  24:Core/Src/devs/wheel.cpp **** }
 112              		.loc 1 24 0
 113 002e 70BD     		pop	{r4, r5, r6, pc}
 114              	.LVL11:
 115              	.L10:
 116              		.align	2
 117              	.L9:
 118 0030 01800080 		.word	-2147450879
 119              		.cfi_endproc
 120              	.LFE406:
 122              		.section	.text._ZL13set_DutyCycleP12Wheel_Configt,"ax",%progbits
 123              		.align	1
 124              		.syntax unified
 125              		.thumb
 126              		.thumb_func
 127              		.fpu fpv4-sp-d16
 129              	_ZL13set_DutyCycleP12Wheel_Configt:
 130              	.LFB407:
  25:Core/Src/devs/wheel.cpp **** 
  26:Core/Src/devs/wheel.cpp **** static void set_DutyCycle(Wheel_Config *w, uint16_t dutyCycle)
  27:Core/Src/devs/wheel.cpp **** {
 131              		.loc 1 27 0
 132              		.cfi_startproc
 133              		@ args = 0, pretend = 0, frame = 0
 134              		@ frame_needed = 0, uses_anonymous_args = 0
 135              	.LVL12:
 136 0000 08B5     		push	{r3, lr}
 137              	.LCFI2:
 138              		.cfi_def_cfa_offset 8
 139              		.cfi_offset 3, -8
 140              		.cfi_offset 14, -4
  28:Core/Src/devs/wheel.cpp ****         set_DutyCycle_Primary(w->htim, w->channel, dutyCycle);
 141              		.loc 1 28 0
 142 0002 0A46     		mov	r2, r1
 143 0004 C169     		ldr	r1, [r0, #28]
 144              	.LVL13:
 145 0006 8069     		ldr	r0, [r0, #24]
 146              	.LVL14:
 147 0008 FFF7FEFF 		bl	_ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt
ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 4


 148              	.LVL15:
  29:Core/Src/devs/wheel.cpp **** }
 149              		.loc 1 29 0
 150 000c 08BD     		pop	{r3, pc}
 151              		.cfi_endproc
 152              	.LFE407:
 154              		.global	__aeabi_f2d
 155              		.global	__aeabi_ddiv
 156              		.global	__aeabi_dmul
 157              		.global	__aeabi_d2uiz
 158              		.section	.text._ZL14set_WheelOmegaP12Wheel_Configf,"ax",%progbits
 159              		.align	1
 160              		.syntax unified
 161              		.thumb
 162              		.thumb_func
 163              		.fpu fpv4-sp-d16
 165              	_ZL14set_WheelOmegaP12Wheel_Configf:
 166              	.LFB409:
  30:Core/Src/devs/wheel.cpp **** 
  31:Core/Src/devs/wheel.cpp **** static void set_WheelDirection(Wheel_Config *w, Direction d)
  32:Core/Src/devs/wheel.cpp **** {
  33:Core/Src/devs/wheel.cpp ****         if (d == Direction::AHEAD)       // AHEAD
  34:Core/Src/devs/wheel.cpp ****         {
  35:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in1_port, w->in1_pin, GPIO_PIN_SET);
  36:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
  37:Core/Src/devs/wheel.cpp ****         }
  38:Core/Src/devs/wheel.cpp ****         else if (d == Direction::BACK)  // BACK
  39:Core/Src/devs/wheel.cpp ****         {
  40:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in1_port, w->in1_pin, GPIO_PIN_RESET);
  41:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_SET);
  42:Core/Src/devs/wheel.cpp ****         }
  43:Core/Src/devs/wheel.cpp ****         else                    // HALT
  44:Core/Src/devs/wheel.cpp ****         {
  45:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in1_port, w->in1_pin, GPIO_PIN_RESET);
  46:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
  47:Core/Src/devs/wheel.cpp ****         }
  48:Core/Src/devs/wheel.cpp **** }
  49:Core/Src/devs/wheel.cpp **** 
  50:Core/Src/devs/wheel.cpp **** static void set_WheelOmega(Wheel_Config *w, float omega)
  51:Core/Src/devs/wheel.cpp **** {
 167              		.loc 1 51 0
 168              		.cfi_startproc
 169              		@ args = 0, pretend = 0, frame = 0
 170              		@ frame_needed = 0, uses_anonymous_args = 0
 171              	.LVL16:
 172 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 173              	.LCFI3:
 174              		.cfi_def_cfa_offset 24
 175              		.cfi_offset 3, -24
 176              		.cfi_offset 4, -20
 177              		.cfi_offset 5, -16
 178              		.cfi_offset 6, -12
 179              		.cfi_offset 7, -8
 180              		.cfi_offset 14, -4
 181 0002 0446     		mov	r4, r0
 182 0004 10EE105A 		vmov	r5, s0
  52:Core/Src/devs/wheel.cpp ****         uint16_t new_omega = (65535.0 / w->max_omega) * (omega);
ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 5


 183              		.loc 1 52 0
 184 0008 806A     		ldr	r0, [r0, #40]	@ float
 185              	.LVL17:
 186 000a FFF7FEFF 		bl	__aeabi_f2d
 187              	.LVL18:
 188 000e 0246     		mov	r2, r0
 189 0010 0B46     		mov	r3, r1
 190 0012 0BA1     		adr	r1, .L15
 191 0014 D1E90001 		ldrd	r0, [r1]
 192 0018 FFF7FEFF 		bl	__aeabi_ddiv
 193              	.LVL19:
 194 001c 0646     		mov	r6, r0
 195 001e 0F46     		mov	r7, r1
 196 0020 2846     		mov	r0, r5	@ float
 197 0022 FFF7FEFF 		bl	__aeabi_f2d
 198              	.LVL20:
 199 0026 0246     		mov	r2, r0
 200 0028 0B46     		mov	r3, r1
 201 002a 3046     		mov	r0, r6
 202 002c 3946     		mov	r1, r7
 203 002e FFF7FEFF 		bl	__aeabi_dmul
 204              	.LVL21:
 205 0032 FFF7FEFF 		bl	__aeabi_d2uiz
 206              	.LVL22:
  53:Core/Src/devs/wheel.cpp ****         set_DutyCycle(w, new_omega);
 207              		.loc 1 53 0
 208 0036 81B2     		uxth	r1, r0
 209 0038 2046     		mov	r0, r4
 210              	.LVL23:
 211 003a FFF7FEFF 		bl	_ZL13set_DutyCycleP12Wheel_Configt
 212              	.LVL24:
  54:Core/Src/devs/wheel.cpp **** }
 213              		.loc 1 54 0
 214 003e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 215              	.LVL25:
 216              	.L16:
 217              		.align	3
 218              	.L15:
 219 0040 00000000 		.word	0
 220 0044 E0FFEF40 		.word	1089470432
 221              		.cfi_endproc
 222              	.LFE409:
 224              		.section	.text._ZL18set_WheelDirectionP12Wheel_Config9Direction,"ax",%progbits
 225              		.align	1
 226              		.syntax unified
 227              		.thumb
 228              		.thumb_func
 229              		.fpu fpv4-sp-d16
 231              	_ZL18set_WheelDirectionP12Wheel_Config9Direction:
 232              	.LFB408:
  32:Core/Src/devs/wheel.cpp ****         if (d == Direction::AHEAD)       // AHEAD
 233              		.loc 1 32 0
 234              		.cfi_startproc
 235              		@ args = 0, pretend = 0, frame = 0
 236              		@ frame_needed = 0, uses_anonymous_args = 0
 237              	.LVL26:
 238 0000 10B5     		push	{r4, lr}
ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 6


 239              	.LCFI4:
 240              		.cfi_def_cfa_offset 8
 241              		.cfi_offset 4, -8
 242              		.cfi_offset 14, -4
 243 0002 0446     		mov	r4, r0
  33:Core/Src/devs/wheel.cpp ****         {
 244              		.loc 1 33 0
 245 0004 61B1     		cbz	r1, .L22
  38:Core/Src/devs/wheel.cpp ****         {
 246              		.loc 1 38 0
 247 0006 0129     		cmp	r1, #1
 248 0008 15D0     		beq	.L23
  45:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
 249              		.loc 1 45 0
 250 000a 0022     		movs	r2, #0
 251 000c 8189     		ldrh	r1, [r0, #12]
 252              	.LVL27:
 253 000e 8068     		ldr	r0, [r0, #8]
 254              	.LVL28:
 255 0010 FFF7FEFF 		bl	HAL_GPIO_WritePin
 256              	.LVL29:
  46:Core/Src/devs/wheel.cpp ****         }
 257              		.loc 1 46 0
 258 0014 0022     		movs	r2, #0
 259 0016 A18A     		ldrh	r1, [r4, #20]
 260 0018 2069     		ldr	r0, [r4, #16]
 261 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 262              	.LVL30:
 263              	.L17:
  48:Core/Src/devs/wheel.cpp **** 
 264              		.loc 1 48 0
 265 001e 10BD     		pop	{r4, pc}
 266              	.LVL31:
 267              	.L22:
  35:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
 268              		.loc 1 35 0
 269 0020 0122     		movs	r2, #1
 270 0022 8189     		ldrh	r1, [r0, #12]
 271              	.LVL32:
 272 0024 8068     		ldr	r0, [r0, #8]
 273              	.LVL33:
 274 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
 275              	.LVL34:
  36:Core/Src/devs/wheel.cpp ****         }
 276              		.loc 1 36 0
 277 002a 0022     		movs	r2, #0
 278 002c A18A     		ldrh	r1, [r4, #20]
 279 002e 2069     		ldr	r0, [r4, #16]
 280 0030 FFF7FEFF 		bl	HAL_GPIO_WritePin
 281              	.LVL35:
 282 0034 F3E7     		b	.L17
 283              	.LVL36:
 284              	.L23:
  40:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_SET);
 285              		.loc 1 40 0
 286 0036 0022     		movs	r2, #0
 287 0038 8189     		ldrh	r1, [r0, #12]
ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 7


 288              	.LVL37:
 289 003a 8068     		ldr	r0, [r0, #8]
 290              	.LVL38:
 291 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 292              	.LVL39:
  41:Core/Src/devs/wheel.cpp ****         }
 293              		.loc 1 41 0
 294 0040 0122     		movs	r2, #1
 295 0042 A18A     		ldrh	r1, [r4, #20]
 296 0044 2069     		ldr	r0, [r4, #16]
 297 0046 FFF7FEFF 		bl	HAL_GPIO_WritePin
 298              	.LVL40:
 299 004a E8E7     		b	.L17
 300              		.cfi_endproc
 301              	.LFE408:
 303              		.section	.text._ZN5Wheel9set_OmegaEf,"ax",%progbits
 304              		.align	1
 305              		.global	_ZN5Wheel9set_OmegaEf
 306              		.syntax unified
 307              		.thumb
 308              		.thumb_func
 309              		.fpu fpv4-sp-d16
 311              	_ZN5Wheel9set_OmegaEf:
 312              	.LFB410:
  55:Core/Src/devs/wheel.cpp **** 
  56:Core/Src/devs/wheel.cpp **** void Wheel::set_Omega(float omega)
  57:Core/Src/devs/wheel.cpp **** {
 313              		.loc 1 57 0
 314              		.cfi_startproc
 315              		@ args = 0, pretend = 0, frame = 0
 316              		@ frame_needed = 0, uses_anonymous_args = 0
 317              		@ link register save eliminated.
 318              	.LVL41:
  58:Core/Src/devs/wheel.cpp ****         if (omega < -wheel_->tolerance) {
 319              		.loc 1 58 0
 320 0000 0368     		ldr	r3, [r0]
 321 0002 D3ED097A 		vldr.32	s15, [r3, #36]
 322 0006 B1EE677A 		vneg.f32	s14, s15
 323 000a B4EEC07A 		vcmpe.f32	s14, s0
 324 000e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 325 0012 07DC     		bgt	.L34
  59:Core/Src/devs/wheel.cpp ****                 dir_ = Direction::BACK;
  60:Core/Src/devs/wheel.cpp ****         }
  61:Core/Src/devs/wheel.cpp ****         else if (omega > wheel_->tolerance) {
 326              		.loc 1 61 0
 327 0014 F4EEC07A 		vcmpe.f32	s15, s0
 328 0018 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 329 001c 09D4     		bmi	.L35
  62:Core/Src/devs/wheel.cpp ****                 dir_ = Direction::AHEAD;
  63:Core/Src/devs/wheel.cpp ****         }
  64:Core/Src/devs/wheel.cpp ****         else {
  65:Core/Src/devs/wheel.cpp ****                 dir_ = Direction::HALT;
 330              		.loc 1 65 0
 331 001e 0223     		movs	r3, #2
 332 0020 0371     		strb	r3, [r0, #4]
 333 0022 01E0     		b	.L27
 334              	.L34:
ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 8


  59:Core/Src/devs/wheel.cpp ****                 dir_ = Direction::BACK;
 335              		.loc 1 59 0
 336 0024 0123     		movs	r3, #1
 337 0026 0371     		strb	r3, [r0, #4]
 338              	.L27:
  66:Core/Src/devs/wheel.cpp ****                 omega_ = 0;
  67:Core/Src/devs/wheel.cpp ****         }
  68:Core/Src/devs/wheel.cpp ****         omega_ = fabsf(omega);
 339              		.loc 1 68 0
 340 0028 B0EEC00A 		vabs.f32	s0, s0
 341              	.LVL42:
 342 002c 80ED020A 		vstr.32	s0, [r0, #8]
  69:Core/Src/devs/wheel.cpp **** }
 343              		.loc 1 69 0
 344 0030 7047     		bx	lr
 345              	.LVL43:
 346              	.L35:
  62:Core/Src/devs/wheel.cpp ****                 dir_ = Direction::AHEAD;
 347              		.loc 1 62 0
 348 0032 0023     		movs	r3, #0
 349 0034 0371     		strb	r3, [r0, #4]
 350 0036 F7E7     		b	.L27
 351              		.cfi_endproc
 352              	.LFE410:
 354              		.section	.text._ZNK5Wheel6updateEv,"ax",%progbits
 355              		.align	1
 356              		.global	_ZNK5Wheel6updateEv
 357              		.syntax unified
 358              		.thumb
 359              		.thumb_func
 360              		.fpu fpv4-sp-d16
 362              	_ZNK5Wheel6updateEv:
 363              	.LFB411:
  70:Core/Src/devs/wheel.cpp **** 
  71:Core/Src/devs/wheel.cpp **** void Wheel::update() const
  72:Core/Src/devs/wheel.cpp **** {
 364              		.loc 1 72 0
 365              		.cfi_startproc
 366              		@ args = 0, pretend = 0, frame = 0
 367              		@ frame_needed = 0, uses_anonymous_args = 0
 368              	.LVL44:
 369 0000 10B5     		push	{r4, lr}
 370              	.LCFI5:
 371              		.cfi_def_cfa_offset 8
 372              		.cfi_offset 4, -8
 373              		.cfi_offset 14, -4
 374 0002 0446     		mov	r4, r0
  73:Core/Src/devs/wheel.cpp ****         if (omega_ < 0) {
 375              		.loc 1 73 0
 376 0004 D0ED027A 		vldr.32	s15, [r0, #8]
 377 0008 F5EEC07A 		vcmpe.f32	s15, #0
 378 000c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 379 0010 09D4     		bmi	.L41
 380              	.LVL45:
 381              	.L37:
  74:Core/Src/devs/wheel.cpp ****                 _Error_Handler(__FILE__, __LINE__);
  75:Core/Src/devs/wheel.cpp ****         }
ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 9


  76:Core/Src/devs/wheel.cpp ****         set_WheelDirection(wheel_, dir_);
 382              		.loc 1 76 0
 383 0012 2179     		ldrb	r1, [r4, #4]	@ zero_extendqisi2
 384 0014 2068     		ldr	r0, [r4]
 385 0016 FFF7FEFF 		bl	_ZL18set_WheelDirectionP12Wheel_Config9Direction
 386              	.LVL46:
  77:Core/Src/devs/wheel.cpp ****         set_WheelOmega(wheel_, omega_);
 387              		.loc 1 77 0
 388 001a 94ED020A 		vldr.32	s0, [r4, #8]
 389 001e 2068     		ldr	r0, [r4]
 390 0020 FFF7FEFF 		bl	_ZL14set_WheelOmegaP12Wheel_Configf
 391              	.LVL47:
  78:Core/Src/devs/wheel.cpp **** }
 392              		.loc 1 78 0
 393 0024 10BD     		pop	{r4, pc}
 394              	.LVL48:
 395              	.L41:
  74:Core/Src/devs/wheel.cpp ****                 _Error_Handler(__FILE__, __LINE__);
 396              		.loc 1 74 0
 397 0026 4A21     		movs	r1, #74
 398 0028 0148     		ldr	r0, .L42
 399              	.LVL49:
 400 002a FFF7FEFF 		bl	_Error_Handler
 401              	.LVL50:
 402 002e F0E7     		b	.L37
 403              	.L43:
 404              		.align	2
 405              	.L42:
 406 0030 00000000 		.word	.LC0
 407              		.cfi_endproc
 408              	.LFE411:
 410              		.global	__aeabi_ui2d
 411              		.global	__aeabi_d2f
 412              		.section	.text._ZN5Wheel9get_OmegaEm,"ax",%progbits
 413              		.align	1
 414              		.global	_ZN5Wheel9get_OmegaEm
 415              		.syntax unified
 416              		.thumb
 417              		.thumb_func
 418              		.fpu fpv4-sp-d16
 420              	_ZN5Wheel9get_OmegaEm:
 421              	.LFB413:
  79:Core/Src/devs/wheel.cpp **** 
  80:Core/Src/devs/wheel.cpp **** // Calculating Omega Ratio When Encoder is used in TI12 mode
  81:Core/Src/devs/wheel.cpp **** inline float omegaRatioTI12(uint32_t ppr)
  82:Core/Src/devs/wheel.cpp **** {
  83:Core/Src/devs/wheel.cpp ****         return (2.0 * M_PI / (4.0 * ppr));
  84:Core/Src/devs/wheel.cpp **** }
  85:Core/Src/devs/wheel.cpp **** 
  86:Core/Src/devs/wheel.cpp **** float Wheel::get_Omega(uint32_t dt_millis)
  87:Core/Src/devs/wheel.cpp **** {
 422              		.loc 1 87 0
 423              		.cfi_startproc
 424              		@ args = 0, pretend = 0, frame = 0
 425              		@ frame_needed = 0, uses_anonymous_args = 0
 426              	.LVL51:
 427 0000 10B5     		push	{r4, lr}
ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 10


 428              	.LCFI6:
 429              		.cfi_def_cfa_offset 8
 430              		.cfi_offset 4, -8
 431              		.cfi_offset 14, -4
 432 0002 2DED028B 		vpush.64	{d8}
 433              	.LCFI7:
 434              		.cfi_def_cfa_offset 16
 435              		.cfi_offset 80, -16
 436              		.cfi_offset 81, -12
  88:Core/Src/devs/wheel.cpp ****         float dt = (float)dt_millis / 1000.0;
 437              		.loc 1 88 0
 438 0006 07EE901A 		vmov	s15, r1	@ int
 439 000a B8EE677A 		vcvt.f32.u32	s14, s15
 440 000e DFED167A 		vldr.32	s15, .L46+8
 441 0012 87EE278A 		vdiv.f32	s16, s14, s15
 442              	.LVL52:
  89:Core/Src/devs/wheel.cpp ****         // Get count and reset the counter
  90:Core/Src/devs/wheel.cpp ****         int16_t counts = wheel_->henc->Instance->CNT;
 443              		.loc 1 90 0
 444 0016 0368     		ldr	r3, [r0]
 445 0018 1B6A     		ldr	r3, [r3, #32]
 446 001a 1A68     		ldr	r2, [r3]
 447 001c 546A     		ldr	r4, [r2, #36]
 448 001e 24B2     		sxth	r4, r4
 449              	.LVL53:
  91:Core/Src/devs/wheel.cpp ****         wheel_->henc->Instance->CNT = 0;
 450              		.loc 1 91 0
 451 0020 0023     		movs	r3, #0
 452 0022 5362     		str	r3, [r2, #36]
  92:Core/Src/devs/wheel.cpp **** 
  93:Core/Src/devs/wheel.cpp ****         // w = 2*pi*f
  94:Core/Src/devs/wheel.cpp ****         // f = (counts / ppr) / dt;
  95:Core/Src/devs/wheel.cpp ****         float omega = omegaRatioTI12(wheel_->enc_ppr) * counts / dt;
 453              		.loc 1 95 0
 454 0024 0368     		ldr	r3, [r0]
 455              	.LVL54:
 456              	.LBB4:
 457              	.LBB5:
  83:Core/Src/devs/wheel.cpp **** }
 458              		.loc 1 83 0
 459 0026 D86A     		ldr	r0, [r3, #44]
 460              	.LVL55:
 461 0028 FFF7FEFF 		bl	__aeabi_ui2d
 462              	.LVL56:
 463 002c 0022     		movs	r2, #0
 464 002e 0F4B     		ldr	r3, .L46+12
 465 0030 FFF7FEFF 		bl	__aeabi_dmul
 466              	.LVL57:
 467 0034 0246     		mov	r2, r0
 468 0036 0B46     		mov	r3, r1
 469 0038 09A1     		adr	r1, .L46
 470 003a D1E90001 		ldrd	r0, [r1]
 471 003e FFF7FEFF 		bl	__aeabi_ddiv
 472              	.LVL58:
 473 0042 FFF7FEFF 		bl	__aeabi_d2f
 474              	.LVL59:
 475              	.LBE5:
ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 11


 476              	.LBE4:
 477              		.loc 1 95 0
 478 0046 07EE904A 		vmov	s15, r4	@ int
 479 004a B8EEE70A 		vcvt.f32.s32	s0, s15
 480 004e 07EE900A 		vmov	s15, r0
 481 0052 20EE270A 		vmul.f32	s0, s0, s15
 482              	.LVL60:
  96:Core/Src/devs/wheel.cpp **** 
  97:Core/Src/devs/wheel.cpp ****         return omega;
  98:Core/Src/devs/wheel.cpp **** }...
 483              		.loc 1 98 0
 484 0056 80EE080A 		vdiv.f32	s0, s0, s16
 485              	.LVL61:
 486 005a BDEC028B 		vldm	sp!, {d8}
 487              	.LCFI8:
 488              		.cfi_restore 80
 489              		.cfi_restore 81
 490              		.cfi_def_cfa_offset 8
 491              	.LVL62:
 492 005e 10BD     		pop	{r4, pc}
 493              	.LVL63:
 494              	.L47:
 495              		.align	3
 496              	.L46:
 497 0060 182D4454 		.word	1413754136
 498 0064 FB211940 		.word	1075388923
 499 0068 00007A44 		.word	1148846080
 500 006c 00001040 		.word	1074790400
 501              		.cfi_endproc
 502              	.LFE413:
 504              		.section	.rodata._ZL11time_periodt.str1.4,"aMS",%progbits,1
 505              		.align	2
 506              	.LC0:
 507 0000 436F7265 		.ascii	"Core/Src/devs/wheel.cpp\000"
 507      2F537263 
 507      2F646576 
 507      732F7768 
 507      65656C2E 
 508              		.text
 509              	.Letext0:
 510              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 511              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 512              		.file 4 "C:/Users/073be/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/CMSIS/Include/core_cm
 513              		.file 5 "C:/Users/073be/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/CMSIS/Device/ST/STM32
 514              		.file 6 "C:/Users/073be/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/CMSIS/Device/ST/STM32
 515              		.file 7 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 516              		.file 8 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 517              		.file 9 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\lib\\gcc\\arm-none-eabi
 518              		.file 10 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 519              		.file 11 "C:/Users/073be/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/STM32F4xx_HAL_Driver
 520              		.file 12 "C:/Users/073be/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/STM32F4xx_HAL_Driver
 521              		.file 13 "C:/Users/073be/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/STM32F4xx_HAL_Driver
 522              		.file 14 "C:/Users/073be/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/STM32F4xx_HAL_Driver
 523              		.file 15 "Core/Inc\\periphs/tim.h"
 524              		.file 16 "Core/Inc\\utils/pid.h"
 525              		.file 17 "Core/Inc\\utils/pid_algorithms.h"
 526              		.file 18 "Core/Inc\\devs/wheel.h"
ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 12


 527              		.file 19 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 528              		.file 20 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 529              		.file 21 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 530              		.file 22 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 531              		.file 23 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 532              		.file 24 "Core/Inc/main.h"
 533              		.file 25 "<built-in>"
ARM GAS  C:\Users\073be\AppData\Local\Temp\ccozdPuT.s 			page 13


DEFINED SYMBOLS
                            *ABS*:00000000 wheel.cpp
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:18     .text._ZL11time_periodt:00000000 $t
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:24     .text._ZL11time_periodt:00000000 _ZL11time_periodt
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:63     .text._ZL11time_periodt:00000024 $d
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:69     .text._ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt:00000000 $t
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:75     .text._ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt:00000000 _ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:118    .text._ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt:00000030 $d
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:123    .text._ZL13set_DutyCycleP12Wheel_Configt:00000000 $t
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:129    .text._ZL13set_DutyCycleP12Wheel_Configt:00000000 _ZL13set_DutyCycleP12Wheel_Configt
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:159    .text._ZL14set_WheelOmegaP12Wheel_Configf:00000000 $t
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:165    .text._ZL14set_WheelOmegaP12Wheel_Configf:00000000 _ZL14set_WheelOmegaP12Wheel_Configf
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:219    .text._ZL14set_WheelOmegaP12Wheel_Configf:00000040 $d
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:225    .text._ZL18set_WheelDirectionP12Wheel_Config9Direction:00000000 $t
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:231    .text._ZL18set_WheelDirectionP12Wheel_Config9Direction:00000000 _ZL18set_WheelDirectionP12Wheel_Config9Direction
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:304    .text._ZN5Wheel9set_OmegaEf:00000000 $t
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:311    .text._ZN5Wheel9set_OmegaEf:00000000 _ZN5Wheel9set_OmegaEf
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:355    .text._ZNK5Wheel6updateEv:00000000 $t
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:362    .text._ZNK5Wheel6updateEv:00000000 _ZNK5Wheel6updateEv
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:406    .text._ZNK5Wheel6updateEv:00000030 $d
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:413    .text._ZN5Wheel9get_OmegaEm:00000000 $t
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:420    .text._ZN5Wheel9get_OmegaEm:00000000 _ZN5Wheel9get_OmegaEm
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:497    .text._ZN5Wheel9get_OmegaEm:00000060 $d
C:\Users\073be\AppData\Local\Temp\ccozdPuT.s:505    .rodata._ZL11time_periodt.str1.4:00000000 $d

UNDEFINED SYMBOLS
_Error_Handler
__aeabi_f2d
__aeabi_ddiv
__aeabi_dmul
__aeabi_d2uiz
HAL_GPIO_WritePin
__aeabi_ui2d
__aeabi_d2f
