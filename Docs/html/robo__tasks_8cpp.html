<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Khangai Robot Play: Core/Src/robot/robo_tasks.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="220px-Triple_Rotacaster_commercial_industrial_omni_wheel.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Khangai Robot Play
   &#160;<span id="projectnumber">01</span>
   </div>
   <div id="projectbrief">THe complete play of the Khangai Robot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('robo__tasks_8cpp.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">robo_tasks.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;FreeRTOS.h&quot;</code><br />
<code>#include &quot;task.h&quot;</code><br />
<code>#include &quot;<a class="el" href="main_8h_source.html">main.h</a>&quot;</code><br />
<code>#include &quot;cmsis_os.h&quot;</code><br />
<code>#include &quot;usb_device.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for robo_tasks.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="robo__tasks_8cpp__incl.png" border="0" usemap="#_core_2_src_2robot_2robo__tasks_8cpp" alt=""/></div>
<map name="_core_2_src_2robot_2robo__tasks_8cpp" id="_core_2_src_2robot_2robo__tasks_8cpp">
<area shape="rect"  title=" " alt="" coords="171,5,305,47"/>
<area shape="rect"  title=" " alt="" coords="5,95,100,121"/>
<area shape="rect"  title=" " alt="" coords="125,95,183,121"/>
<area shape="rect"  href="main_8h.html" title=": Header for main.c file. This file contains the common defines of the application." alt="" coords="207,95,269,121"/>
<area shape="rect"  title=" " alt="" coords="293,95,383,121"/>
<area shape="rect"  title=" " alt="" coords="407,95,504,121"/>
<area shape="rect"  title=" " alt="" coords="179,169,297,196"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a016544463b4842ced7191baf8f449cea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robo__tasks_8cpp.html#a016544463b4842ced7191baf8f449cea">StartDefaultTask</a> (void const *argument)</td></tr>
<tr class="memdesc:a016544463b4842ced7191baf8f449cea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function implementing the defaultTask thread.  <a href="#a016544463b4842ced7191baf8f449cea">More...</a><br /></td></tr>
<tr class="separator:a016544463b4842ced7191baf8f449cea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e5b32a2e15bb82416f89b7a733d1e09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robo__tasks_8cpp.html#a4e5b32a2e15bb82416f89b7a733d1e09">RobotThread</a> (void const *argument)</td></tr>
<tr class="memdesc:a4e5b32a2e15bb82416f89b7a733d1e09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function implementing the RoboSequence thread.  <a href="#a4e5b32a2e15bb82416f89b7a733d1e09">More...</a><br /></td></tr>
<tr class="separator:a4e5b32a2e15bb82416f89b7a733d1e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bdf1b0904a1ea40164f181f7e86f4ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robo__tasks_8cpp.html#a8bdf1b0904a1ea40164f181f7e86f4ef">LoggingThread</a> (void const *argument)</td></tr>
<tr class="memdesc:a8bdf1b0904a1ea40164f181f7e86f4ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function implementing the logging thread.  <a href="#a8bdf1b0904a1ea40164f181f7e86f4ef">More...</a><br /></td></tr>
<tr class="separator:a8bdf1b0904a1ea40164f181f7e86f4ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8bdf1b0904a1ea40164f181f7e86f4ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bdf1b0904a1ea40164f181f7e86f4ef">&#9670;&nbsp;</a></span>LoggingThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LoggingThread </td>
          <td>(</td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>argument</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function implementing the logging thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argument</td><td>Not used </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4e5b32a2e15bb82416f89b7a733d1e09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e5b32a2e15bb82416f89b7a733d1e09">&#9670;&nbsp;</a></span>RobotThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RobotThread </td>
          <td>(</td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>argument</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function implementing the RoboSequence thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argument</td><td>Not used </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This thread is responsible for reading the current state of the robot.</dd></dl>
<pre>
Tasks performed by this thread :
1) Read orientation given by the OrientationSensor based on the State the
   robot is in.
2) Read position given by the PositionSensor based on the State the robot is
   in.
3) Filter Orientation data.
     3.1) Filter roll
     3.2) Filter roll compensated pitch
     3.3) Filter tilt compensated pitch
4) Rotate the measured position from body frame to the field frame
5) Filter Position Data</pre><pre>6) Find the robot's state based on it's current position
7) Calculate the robot's angle of attack to reach the next state
8) Calculate the robot's velocity according to it's state
9) Calculate the correction angular velocity of the robot
10) Calculate the omegas of each wheel</pre><pre>11) Measure omega of each wheels
12) Compute error
13) Compute <a class="el" href="class_p_i_d.html">PID</a> using available <a class="el" href="class_p_i_d___algorithm.html">PID_Algorithm</a>
14) set Omega of each wheel
15) update new omegas of all wheels at once
</pre> 
</div>
</div>
<a id="a016544463b4842ced7191baf8f449cea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a016544463b4842ced7191baf8f449cea">&#9670;&nbsp;</a></span>StartDefaultTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StartDefaultTask </td>
          <td>(</td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>argument</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function implementing the defaultTask thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argument</td><td>Not used </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_c6310732a22f63c0c2fc5595561e68f1.html">Core</a></li><li class="navelem"><a class="el" href="dir_b596f468b52957496e4f78b80e029268.html">Src</a></li><li class="navelem"><a class="el" href="dir_1d896444af14d00cb5ddf02683191b30.html">robot</a></li><li class="navelem"><a class="el" href="robo__tasks_8cpp.html">robo_tasks.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
